root@srv684502:/home/tkoin-betwin/htdocs/betwin.tkoin.finance#curl -s https://betwin.tkoin.finance/user/tkoin-wallet 2>&1 | grep -o "Available Balance\|Deposit\|Withdraw" | head -3 && echo "✅ Wallet fully functional!""
✅ Wallet fully functional!
root@srv684502:/home/tkoin-betwin/htdocs/betwin.tkoin.finance# echo "=== tkoin-wallet.blade.php ===" && head -30 resources/views/user/tkoin-wallet.blade.php && echo "" && echo "=== tkoin-wallet.js ===" && head -50 public/js/tkoin-wallet.js && echo "" && echo "=== components/tkoin-wallet.blade.php ===" && head -30 resources/views/components/tkoin-wallet.blade.php
=== tkoin-wallet.blade.php ===
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tkoin Wallet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="background: #1a1a2e;">
    <div class="container" style="max-width: 600px; margin: 40px auto;">
        @include('components.tkoin-wallet')
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ asset('js/tkoin-wallet.js') }}"></script>
</body>
</html>

=== tkoin-wallet.js ===
class TkoinWallet{constructor(){this.apiBaseUrl='/api/user/tkoin';this.authToken=this.getAuthToken();this.refreshInterval=null;this.init()}init(){this.setupEventListeners();this.fetchBalance();this.fetchHistory();this.refreshInterval=setInterval(()=>{this.fetchBalance();this.fetchHistory()},30000)}getAuthToken(){const e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute('content'):null}setupEventListeners(){document.getElementById('btn-refresh')?.addEventListener('click',()=>{this.fetchBalance();this.fetchHistory()}),document.getElementById('depositForm')?.addEventListener('submit',e=>{e.preventDefault();this.handleDeposit()}),document.getElementById('withdrawalForm')?.addEventListener('submit',e=>{e.preventDefault();this.handleWithdrawal()})}async fetchBalance(){try{const e=await fetch(`${this.apiBaseUrl}/balance`,{method:'GET',headers:this.getHeaders()}),t=await e.json();e.ok&&this.updateBalanceDisplay(t)}catch(e){console.error('Error fetching balance:',e)}}updateBalanceDisplay(e){const t=parseFloat(e.balance).toFixed(2),a=e.currency||'CREDIT';document.getElementById('balance-amount').textContent=`${t} ${a}`,document.getElementById('balance-account').textContent=`Account ID: ${e.account_id||'---'}`;const s=document.getElementById('wallet-status');s&&(s.innerHTML='<span class="badge badge-success">Connected</span>')}async handleDeposit(){const e=document.getElementById('depositAmount').value,t=document.getElementById('depositError'),a=document.getElementById('depositSubmit'),s=document.getElementById('depositSpinner'),i=document.getElementById('depositSubmitText');if(t.style.display='none',!e||parseFloat(e)<=0)return void this.showError('Please enter a valid amount',t);a.disabled=!0,s.style.display='inline-block',i.textContent='Processing...';try{const o=await fetch(`${this.apiBaseUrl}/deposit`,{method:'POST',headers:this.getHeaders(),body:JSON.stringify({amount:parseFloat(e)})});if(!(await o.json()).ok)throw new Error('Deposit failed');this.showSuccess(`Deposit of ${e} CREDIT initiated successfully!`),document.getElementById('depositForm').reset();const n=bootstrap.Modal.getInstance(document.getElementById('depositModal'));n?.hide(),setTimeout(()=>{this.fetchBalance();this.fetchHistory()},1e3)}catch(e){this.showError(e.message||'Failed to initiate deposit',t)}finally{a.disabled=!1,s.style.display='none',i.textContent='Initiate Deposit'}}async handleWithdrawal(){const e=document.getElementById('withdrawalAmount').value,t=document.getElementById('solanaAddress').value,a=document.getElementById('withdrawalError'),s=document.getElementById('withdrawalSubmit'),i=document.getElementById('withdrawalSpinner'),o=document.getElementById('withdrawalSubmitText');if(a.style.display='none',!e||parseFloat(e)<=0)return void this.showError('Please enter a valid amount',a);s.disabled=!0,i.style.display='inline-block',o.textContent='Processing...';try{const n={amount:parseFloat(e)};t&&(n.solana_address=t);const r=await fetch(`${this.apiBaseUrl}/withdrawal`,{method:'POST',headers:this.getHeaders(),body:JSON.stringify(n)});if(!(await r.json()).ok)throw new Error('Withdrawal failed');this.showSuccess(`Withdrawal of ${e} CREDIT initiated! Processing: 5-30 min`),document.getElementById('withdrawalForm').reset();const l=bootstrap.Modal.getInstance(document.getElementById('withdrawalModal'));l?.hide(),setTimeout(()=>{this.fetchBalance();this.fetchHistory()},1e3)}catch(e){this.showError(e.message||'Failed to initiate withdrawal',a)}finally{s.disabled=!1,i.style.display='none',o.textContent='Initiate Withdrawal'}}async fetchHistory(){try{const e=await fetch(`${this.apiBaseUrl}/history?limit=10`,{method:'GET',headers:this.getHeaders()}),t=await e.json();e.ok&&this.updateHistoryDisplay(t.settlements)}catch(e){console.error('Error fetching history:',e)}}updateHistoryDisplay(e){const t=document.getElementById('transaction-body');e&&e.length>0?t.innerHTML=e.map(e=>{const a='deposit'===e.type?'type-deposit':'type-withdrawal',s=`status-${e.status}`,i='deposit'===e.type?'Deposit':'Withdrawal',o=parseFloat(e.amount).toFixed(2),n=new Date(e.created_at).toLocaleDateString(),r=e.status.charAt(0).toUpperCase()+e.status.slice(1);return`<tr><td><span class="${a}">${i}</span></td><td>${o} CREDIT</td><td><span class="badge ${s}">${r}</span></td><td>${n}</td></tr>`}).join(''):t.innerHTML='<tr><td colspan="4" class="text-center text-muted">No transactions yet</td></tr>'}showSuccess(e){const t=document.createElement('div');t.className='alert alert-success alert-dismissible fade show',t.innerHTML=`${e}<button type="button" class="btn-close" data-bs-dismiss="alert"></button>`;const a=document.getElementById('tkoin-wallet');a.insertBefore(t,a.firstChild),setTimeout(()=>t.remove(),5e3)}showError(e,t=null){t&&(t.textContent=e,t.style.display='block')}getHeaders(){return{'Content-Type':'application/json','Accept':'application/json','X-CSRF-TOKEN':this.authToken||''}}destroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}}document.addEventListener('DOMContentLoaded',()=>{window.tkoinWallet=new TkoinWallet()}),window.addEventListener('beforeunload',()=>{window.tkoinWallet?.destroy()});

=== components/tkoin-wallet.blade.php ===
<style>
/* ========== Tkoin Wallet Styles ========== */
#tkoin-wallet-container {
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  overflow: hidden;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

.tkoin-wallet-container {
  padding: 0;
  margin: 0;
}

.wallet-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.wallet-header h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
}

root@srv684502:/home/tkoin-betwin/htdocs/betwin.tkoin.finance# cp resources/views/user/tkoin-wallet.blade.php resources/views/user/tkoin-wallet.blade.php.backup
cp resources/views/components/tkoin-wallet.blade.php resources/views/components/tkoin-wallet.blade.php.backup
cp public/js/tkoin-wallet.js public/js/tkoin-wallet.js.backup
root@srv684502:/home/tkoin-betwin/htdocs/betwin.tkoin.finance# cat resources/views/user/tkoin-wallet.blade.php | tail -100
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tkoin Wallet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="background: #1a1a2e;">
    <div class="container" style="max-width: 600px; margin: 40px auto;">
        @include('components.tkoin-wallet')
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ asset('js/tkoin-wallet.js') }}"></script>
</body>
</html>
root@srv684502:/home/tkoin-betwin/htdocs/betwin.tkoin.finance# 